title: init.d + rc.d VS systemd UbuntuæœåŠ¡è¿›ç¨‹ç®¡ç†ä¸å¼€æœºè‡ªå¯åŠ¨
date: 2018-04-05 18:20:26
permalink: initd-rcd-systemd
category: æŠ€æœ¯
tags:
- Linux
- Ubuntu
- æœåŠ¡è¿›ç¨‹ç®¡ç†
---

![](http://blogqn.qixincha.com/Systemctl_tw.png)

ä½œä¸ºä¸€åUbuntuæœåŠ¡å™¨æ·±åº¦ç”¨æˆ·ï¼Œåœ¨Ubuntu 16.04ç‰ˆæœ¬ä¹‹å‰ä¸€ç›´ä½¿ç”¨`init.d` + `rc.d`å¥—è£…æ¥ç®¡ç†å„ç§æœåŠ¡ã€‚

å¦‚ï¼šNginx, ssh, docker, supervisordç­‰ã€‚

Ubuntu 16.04 æ–°å¢äº†ä¸€ä¸ªæœåŠ¡è¿›ç¨‹ç®¡ç†å·¥å…· `systemd`ã€‚æˆ‘å°†å…¶ç†è§£ä¸ºä¸€ä¸ªwrapperç¨‹åºï¼Œå°è£…äº†åº•å±‚æŠ€æœ¯ç»†èŠ‚ï¼Œä½¿å¾—äº¤äº’æ›´äººæ€§åŒ–ã€‚

ä¸¤ç§å‘½ä»¤éƒ½æ˜¯æ— éœ€å®‰è£…ä»»ä½•åŒ…å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä½†æ˜¯æ›´æ¨èä½¿ç”¨æ–°çš„å‘½ä»¤ï¼Œä»¥è·å¾—æ›´ä½³çš„ä½“éªŒã€‚

ç³»ç»Ÿè‡ªå¸¦çš„å„ç§æœåŠ¡ï¼Œä¸dpkgåŒ…çš„é»˜è®¤é…ç½®çš„æœåŠ¡è¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œéƒ½å·²è¿ç§»åˆ°systemdã€‚è¶³è§å®˜æ–¹å¯¹å…¶æ¨èç¨‹åº¦ã€‚

é‚£ä¹ˆï¼Œ`systemd`å’Œ`init.d` + `rc.d`åˆ†åˆ«æ˜¯å¦‚ä½•ç®¡ç†æœåŠ¡çš„å‘¢ï¼Ÿsystemdçš„ä¼˜åŠ¿åˆåœ¨å“ªé‡Œï¼Ÿ

<!-- more -->

å’‹ä»¬æŒ‰å…ˆåé¡ºåºä»‹ç»ï¼Œå…ˆè®²`init.d`å’Œ`rc.d`ï¼Œå†æ¼”è¿›åˆ°`systemd`ï¼Œ ä¾¿å¯¹ä¸Šé¢çš„é—®é¢˜æœ‰å®¢è§‚çš„è®¤è¯†äº†ã€‚

å‰©ä¸‹çš„å°±è‡ªå·±ç‹¬ç«‹æ€è€ƒä¸Googleå§ğŸ¤ª

## init.d - Ubuntu 14.04åŠæ›´æ—©çš„ç‰ˆæœ¬ä¸­æœåŠ¡è¿›ç¨‹ç®¡ç†çš„æ­£ç¡®å§¿åŠ¿
`service nginx reload` æƒ³å¿…å¤§å¤šæ•°äººéƒ½ä½¿ç”¨è¿‡ç±»ä¼¼æŒ‡ä»¤ã€‚ä»–å°±æ˜¯ç”¨äºæ‰§è¡Œå„ç§`init.d`è„šæœ¬çš„äº¤äº’ç¨‹åºã€‚

åœ¨è®²init.dä¹‹å‰ï¼Œå…ˆè®²ä¸€ä¸‹`/sbin/init`è¿™ä¸ªç¨‹åºã€‚è¯¥ç¨‹åºæ˜¯Linuxå†…æ ¸åŠ è½½åå¯åŠ¨çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œpidæ˜¯1ã€‚åç»­çš„å¯åŠ¨å·¥ä½œï¼Œéƒ½æ˜¯ç”±`/sbin/init`è„šæœ¬ç›´æ¥æˆ–é—´æ¥è°ƒç”¨å…¶ä»–ç¨‹åºå®Œæˆçš„ã€‚

* init.dä¸­çš„å„ç§å®ˆæŠ¤è¿›ç¨‹çš„ç®¡ç†è„šæœ¬ï¼Œä¼šåœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹è¢«ä½¿ç”¨ï¼š

	1. å½“ç”¨æˆ·ä½¿ç”¨`service`æŒ‡ä»¤æ—¶ã€‚`service`çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰€æ”¯æŒæœåŠ¡ï¼Œè¿™äº›éƒ½åœ¨`/etc/init.d/`ä¸­ä»¥ä¸€ä¸ªshellè„šæœ¬çš„å½¢æ€å­˜åœ¨ã€‚è€Œç¬¬äºŒä¸ªå‚æ•°æŒ‡ä»¤ï¼Œ åˆ™æ˜¯å¯¹åº”è„šæœ¬ä¸­çš„ä¸€ä¸ªå‡½æ•°ã€‚åªæœ‰æŒ‡å®šæœåŠ¡çš„init.dè„šæœ¬ä¸­ï¼Œå­˜åœ¨å¯¹åº”çš„å‡½æ•°æ—¶ï¼Œ`service`æŒ‡ä»¤æ‰èƒ½æ‰§è¡ŒæˆåŠŸã€‚ä¸Šå›¾å°±å¾ˆå®¹æ˜“æ˜ç™½äº†ï¼š
![](http://blogqn.qixincha.com/48039570-955D-4C1D-BA92-5B07E39D1787.png)
nginx ä¸ ssh éƒ½åœ¨`/etc/init.d`ç›®å½•ä¸‹æœ‰å¯¹åº”çš„è„šæœ¬ï¼Œæ‰€ä»¥éƒ½èƒ½ä½œä¸º`service`çš„ç¬¬ä¸€ä¸ªå‚æ•°è°ƒç”¨ã€‚ä½†æ˜¯configtestå‡½æ•°ä»…åœ¨`/etc/init.d/nginx`ä¸­æœ‰å®šä¹‰ï¼Œæ‰€ä»¥ä»…`service nginx configtest`èƒ½è°ƒç”¨æˆåŠŸã€‚è€Œ`service ssh configtest`åˆ™è°ƒç”¨å¤±è´¥ã€‚
è€Œ`httpd`å› åœ¨`/etc/init.d`ä¸‹æ²¡æœ‰å¯¹åº”çš„è„šæœ¬ï¼Œä¾¿æ— æ³•ä½¿ç”¨`service`å¯¹å…¶è¿›è¡Œç®¡ç†ã€‚

	2. å¼€æœºå¯åŠ¨æ—¶ä½œä¸ºè¢«å¼€æœºæ‰§è¡Œç­‰çº§å®šä¹‰ç¨‹åºè°ƒç”¨ï¼Œæ—¢åé¢è®²åˆ°çš„rc.dï¼Œå…¶å·¥ä½œæ˜¯ä¾èµ–`/etc/init.d`è„šæœ¬çš„

* Tips:
	* å½“ä½¿ç”¨`service`èƒ½å¯åŠ¨æœåŠ¡ï¼Œä½†åœæ­¢æˆ–æŸ¥çœ‹statusæ—¶æç¤ºæ‰¾ä¸åˆ°æœåŠ¡ã€‚å¤šåŠæ˜¯æœåŠ¡é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹äº†pidæ–‡ä»¶è·¯å¾„ã€‚ è€Œ`/etc/init.d/script`è„šæœ¬ä¾èµ–pidæ¥ç®¡ç†æœåŠ¡è¿›ç¨‹çŠ¶æ€ï¼Œè€Œä¸”è„šæœ¬ä¸­çš„pidè·¯å¾„æ˜¯å†™æ­»çš„ã€‚ä¸€æ—¦`/etc/init.d/script`ä¸­ä½¿ç”¨çš„pidè·¯å¾„ä¸å®é™…pidæ–‡ä»¶è·¯å¾„ä¸ç¬¦æ—¶ï¼Œå°±æ— æ³•åšåç»­çš„æ‰€æœ‰ç®¡ç†å·¥ä½œäº†ã€‚ä¸€æ—¦å¯åŠ¨ï¼Œ å°±è„±ç¦»serviceæ§åˆ¶äº†ã€‚
    * `/etc/init.d/`ä¸‹çš„è„šæœ¬éœ€è¦æœ‰å¯æ‰§è¡Œæƒé™ `chmod +x`ã€‚
	* å¤§å¤š`init.d`è„šæœ¬ä¼šä¾èµ–ä¸`/etc/default/`ç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ï¼Œé‡åˆ°é—®é¢˜æ—¶ï¼Œä¸å¦¨ä¹Ÿæ’æŸ¥ä¸€ä¸‹è¿™ä¸ªç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ã€‚

## rc.d - å¼€æœºè‡ªå¯åŠ¨ä¸å…³æœºè‡ªåœæ­¢æ³¨å†Œä¿¡æ¯ç®¡ç†
æœ€å¼€å§‹å­¦Linuxæ—¶ï¼ˆå¤§æ¦‚æ˜¯2010å¹´ï¼‰ï¼Œæƒ³è¦å®ç°ä¸€äº›æœåŠ¡çš„å¼€æœºè‡ªå¯åŠ¨ã€‚åœ¨ç™¾åº¦æŸ¥åˆ°å„ç§æ–‡ç« ï¼Œå¤§éƒ¨åˆ†æ˜¯æ•™æˆ‘å¦‚ä½•åœ¨`/etc/bash.rc` ç”šè‡³ `~/.bashrc` ä¸­æ·»åŠ æ‰§è¡Œä»£ç æ¥å¯åŠ¨è¿™ä¸ªæœåŠ¡ã€‚è¿™äº›æ–¹æ³•ä¸ä»…ä¸‘é™‹ï¼Œè€Œä¸”è®©äººéš¾ä»¥ç†è§£ã€‚

ç†è®ºä¸Šï¼ŒLinuxç³»ç»Ÿå†å¯åŠ¨æ—¶ï¼Œä¼šæŒ‰é¡ºåºåŠ è½½è¯¸å¤šè„šæœ¬ï¼Œ ä½ æŠŠå¯åŠ¨ä»£ç æ’åˆ°ä»»ä½•ä¸€ä¸ªå¼€æœºä¼šè¢«åŠ è½½çš„è„šæœ¬ä¸­ï¼Œéƒ½å¯ä»¥å®ç°å¼€æœºè‡ªå¯åŠ¨ã€‚ä½†æ˜¯åªéœ€ç¨èŠ±äº›å¿ƒæ€ï¼Œçœ‹ä¸€ä¸‹sshdçš„å¯åŠ¨æ–¹å¼ï¼Œæˆ–ç”¨apt-getè£…ä¸€ä¸ªnginx, çœ‹çœ‹nginxçš„å¯åŠ¨æ–¹å¼ï¼Œä¾¿ä¼šå‘ç°è¿™æ ·åšæ˜¯ä¸å¯¹çš„ã€‚

å¦‚æœä½ å°±æ˜¯å¾€`bash.rc`é‡Œé¢åŠ å¯åŠ¨æŒ‡ä»¤æ¥å®ç°å¼€æœºå¯åŠ¨çš„ï¼Œé‚£ä½ å¤šåŠä¹Ÿä¸çŸ¥é“å¦‚ä½•å–æ¶ˆnginxç­‰æœåŠ¡çš„å¼€æœºè‡ªå¯åŠ¨ã€‚

å³ä½¿åœ¨æœ€æ–°çš„Ubuntuæ“ä½œç³»ç»Ÿä¸­ï¼Œ `rc.d`ä¾ç„¶æ˜¯ç³»ç»Ÿå¯åŠ¨çš„å¿…è¦å·¥å…·ã€‚å³ä½¿ä½¿ç”¨systemdçš„enable, disableæ¥ç®¡ç†æœåŠ¡çš„å¼€æœºè‡ªå¯åŠ¨ï¼Œä»–èƒŒåä¹Ÿä¼šå’Œsystemdæœ‰ä¸€å®šçš„è”åŠ¨ã€‚

åœ¨è¾ƒæ—©çš„Ubuntuç‰ˆæœ¬ä¸­ï¼Œæ·»åŠ å¼€æœºè‡ªå¯åŠ¨çš„æœ€ä½³å®è·µå°±æ˜¯ä½¿ç”¨rc.då·¥å…·ã€‚ä¸‹é¢ç®€å•ä»‹ç»å‡ ä¸ªå¸¸ç”¨æŒ‡ä»¤ï¼š

1. æ·»åŠ supervisordçš„å¼€æœºå¯åŠ¨: `update-rc.d supervisord defaults`
2. æŸ¥çœ‹supervisordåœ¨rc.dä¸­çš„æ³¨å†Œæƒ…å†µï¼š `ls -l /etc/rc*.d | grep supervisord`
3. ä»rc.dä¸­ç§»é™¤supervosrdçš„æ³¨å†Œï¼š `update-rc.d -f supervisord remove`

**ä»¥ä¸ŠæŒ‡ä»¤éƒ½ä¾èµ–ç›¸åº”çš„init.dè„šæœ¬**

ä»¥ä¸ŠæŒ‡ä»¤å¯ç”¨äºç®¡ç†`rc.d`ä¸­æ³¨å†Œçš„æœåŠ¡ï¼Œé‚£ä¹ˆï¼Œrc.dåˆæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿä¸ºä½•æ³¨å†Œåœ¨å…¶ä¸­çš„æœåŠ¡å°±ä¼šå¼€æœºè‡ªå¯åŠ¨å‘¢ï¼Ÿ

* é¦–å…ˆï¼Œ çœ‹çœ‹`/etc`ç›®å½•ä¸‹çš„`rc*.d`ä»¬
![](http://blogqn.qixincha.com/61290685-C7D9-4A45-8C5A-EE05C9B367C0.png)
æˆ‘ä»¬çœ‹åˆ°æœ‰8ä¸ª`rc*.d`ç›®å½• + 1ä¸ª`rc.local`æ–‡ä»¶ã€‚
å…ˆè¯´ä¸€ä¸‹8ä¸ªç›®å½•ï¼Œ å…¶å¯¹åº”ç€Ubuntuçš„8ä¸ªrunlevelã€‚ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œæ”¯æŒçš„å…è®¸æ¨¡å¼ç•¥æœ‰ä¸åŒã€‚ ä½†éƒ½ä¼šæä¾›è‹¥å¹²`rc*.d`ç›®å½•ï¼Œç”¨äºç®¡ç†ä¸åŒç³»ç»Ÿè¿è¡Œæ¨¡å¼ä¸‹éœ€è¦å¯åŠ¨/åœæ­¢çš„æœåŠ¡ã€‚ä¸åŒæ“ä½œç³»ç»Ÿçš„runlevelå¯è§å‚è€ƒèµ„æ–™ä¸­çš„`Linux Runlevel`é“¾æ¥ã€‚
* Ubuntuçš„runlevelï¼š
	* 0: å…³æœºæ¨¡å¼ï¼Œé‡Œé¢ä¸€èˆ¬éƒ½æ˜¯åœæ­¢æœåŠ¡çš„è„šæœ¬ï¼ˆKæ‰“å¤´ï¼‰ã€‚æˆ‘ç†è§£æ˜¯æ‰§è¡Œå…³æœºæŒ‡ä»¤æ—¶ï¼Œç³»ç»Ÿä¼šå…ˆè¿›å…¥è¿™ä¸ªrunlevel, ç„¶ååœæ‰è¿™é‡Œå®šä¹‰çš„æ‰€æœ‰æœåŠ¡ï¼Œå†æœ€ç»ˆå®ç°å®‰å…¨å…³æœºã€‚ç›´æ¥æ–­ç”µä¼°è®¡ä¸ä¼šæ‰åˆ°è¿™ä¸ªæ¨¡å¼é‡Œã€‚
	* 1: å•äººæ¨¡å¼ï¼Œç±»ä¼¼Windowsçš„å®‰å…¨æ¨¡å¼ï¼Œ ä»…å¯åŠ¨rootç”¨æˆ·çš„å‡ ä¸ªå¿…è¦è¿›ç¨‹ï¼Œé™¤rootå¤–çš„å…¶ä»–æ–‡ä»¶ç³»ç»Ÿéƒ½ä¸ä¼šæŒ‚è½½
	* 2: æ— ç½‘ç»œçš„å¤šäººæ¨¡å¼ï¼Œç½‘ç»œç›¸å…³æœåŠ¡éƒ½ä¸ä¼šå¯åŠ¨ï¼Œç½‘å¡ä¹Ÿä¸ä¼šè‡ªåŠ¨ifconfigã€‚è‡³äºå¤šäººæ¨¡å¼ï¼ŒUnix/Linuxéƒ½æ˜¯å¤šä»»åŠ¡å¤šç”¨æˆ·æ“ä½œç³»ç»Ÿï¼ŒåŒä¸€æ—¶é—´ç‚¹æ˜¯å…è®¸æœ‰å¤šä¸ªç”¨æˆ·åœ¨ç³»ç»Ÿä¸­å¼€å¤šä¸ªshellçš„ã€‚Windowsæ¡Œé¢ç‰ˆè¿™ç§å•ç”¨æˆ·æ“ä½œç³»ç»Ÿéœ€è¦é€€å‡ºå†åˆ‡æ¢ã€‚
	* 3: å¸¦ç½‘ç»œçš„å¤šäººæ¨¡å¼ï¼Œä¸€èˆ¬çš„å‘½ä»¤è¡Œæ¨¡å¼
	* 4: æ— ç”¨æˆ·æ¨¡å¼ï¼Œç”¨äºç‰¹æ®Šåœºæ™¯ï¼Œå¯è¿›å…¥æ¨¡å¼åæ–°å»ºç”¨æˆ·
	* 5: GUIæ¨¡å¼ï¼Œ ä¼šå¯åŠ¨å›¾åƒç•Œé¢
	* 6: é‡å¯æ¨¡å¼ï¼Œ ç±»ä¼¼0(å…³æœºæ¨¡å¼), ä¹Ÿéƒ½æ˜¯åœæ­¢æœåŠ¡çš„è„šæœ¬ï¼ˆKæ‰“å¤´ï¼‰ã€‚
	* S: å•äººæ¨¡å¼ï¼Œæ— ç½‘ç»œå’Œå„ç§æœåŠ¡è¿›ç¨‹çš„å•äººæ¨¡å¼ï¼Œè·Ÿ1å·æ¨¡å¼ç±»ä¼¼ï¼Œé™åˆ¶ç•¥å®½æ¾ä¸€äº›ã€‚
* rc.local: æ­¤æ–‡ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªç®€å•çš„shellè„šæœ¬ï¼Œ åˆå§‹åŒ–æ—¶æ˜¯ç©ºçš„ã€‚æœ‰ä¸€äº›ä¸æ–¹ä¾¿åšinit.dè„šæœ¬çš„ç®€å•ç¨‹åºï¼Œ å¯ä»¥æ”¾åœ¨è¿™ä¸ªè„šæœ¬ä¸­å¼€æœºå¯åŠ¨ã€‚è¯¥è„šæœ¬è™½ç„¶åå­—å«rc.localï¼Œ ä½†æ˜¯å’Œå…¶ä»–`rc*.d`ç›®å½•ä¸åŒï¼Œå…¶å¹¶ä¸å±äºå¼€æœºç­‰çº§å®šä¹‰ã€‚è€Œæ˜¯åœ¨å„è¿è¡Œæ¨¡å¼ï¼ˆé™¤0,6ä¸¤ä¸ªæ¨¡å¼å¤–çš„å…¶ä»–æ¨¡å¼ï¼‰çš„`rc*.d`ä¸­å‡åœ¨æœ€åä¸€æ­¥è°ƒèµ·`/etc/init.d/rc.local`çš„startå‡½æ•°ï¼Œ å†ç”±startå‡½æ•°å®Œæˆè°ƒç”¨ã€‚è€Œ`/etc/init.d/rc.local`çš„stopå‡½æ•°æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥å³æ—¶æ³¨å†Œäº†`K03rc.local`æ–‡ä»¶åˆ°æŸä¸ªè¿è¡Œæ¨¡å¼ä¸‹ï¼Œä¹Ÿä¸ä¼šå‘ç”Ÿ`/etc/rc.local`è„šæœ¬çš„è°ƒç”¨

* `rc*.d`ä¸­æ³¨å†Œçš„ä¿¡æ¯ï¼šå°è¯•åˆ—å‡º`/etc/rc3.d`(ä¸€èˆ¬å‘½ä»¤è¡Œæ¨¡å¼)ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼š
![](http://blogqn.qixincha.com/D4861105-42BE-4A22-8140-A7C4D16ECC2A.png)
	å‘ç°é™¤READMEå¤–æ‰€æœ‰æ–‡ä»¶å‡è½¯é“¾æ¥åˆ°`/etc/init.d/`ç›®å½•ä¸­çš„è„šæœ¬ã€‚è¿™äº›è½¯è¿æ¥çš„æ–‡ä»¶åè§„åˆ™å¦‚ä¸‹ï¼š
	* Kæ‰“å¤´ï¼ˆKxxxxï¼‰ï¼šä¼šè°ƒç”¨å¯¹åº”è„šæœ¬çš„stopå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯åœæ‰å¯¹åº”æœåŠ¡ã€‚å¯ä»¥æŠŠKçœ‹ä½œKillçš„é¦–å­—æ¯
	* Sæ‰“å¤´ï¼ˆSxxxxï¼‰ï¼šä¼šè°ƒç”¨å¯¹åº”è„šæœ¬çš„startå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å¯åŠ¨å¯¹åº”æœåŠ¡ã€‚å¯ä»¥æŠŠSçœ‹ä½œStartçš„é¦–å­—æ¯
	* K/Såé¢çš„æ•°å­—(K01xxxx/S02xxxx)ï¼šç”¨äºç¡®å®šè°ƒç”¨é¡ºåºï¼Œæ•°å­—è¶Šå°ï¼Œè¶Šå…ˆè°ƒç”¨ã€‚
	* åé¢çš„å­—æ¯æ²¡æœ‰å¤šä½™çš„å«ä¹‰ï¼Œåªæ˜¯ä½¿ç”¨`update-rc.d`è„šæœ¬ç®¡ç†è¿™äº›æ³¨å†Œä¿¡æ¯æ—¶ï¼Œé»˜è®¤ä¼šä½¿ç”¨æœåŠ¡åç§°

* å¼€æœºæ—¶ä½œä¸šé¡ºåºå¦‚ä¸‹ï¼š å†…æ ¸åŠ è½½å®Œæ¯• -> `/sbin/init`è¿›ç¨‹å¯åŠ¨ -> æŒ¨ä¸ªè°ƒèµ·å¯¹åº”è¿è¡Œæ¨¡å¼ä¸‹çš„`rc.d`ä¸­æ³¨å†Œçš„æœåŠ¡çš„å¯¹åº”å‡½æ•° -> è‹¥æ³¨å†Œäº†`S0xrc.local`ä¿¡æ¯ä¼šè°ƒèµ·`/etc/rc.local`è„šæœ¬
* è€Œå…³æœº/é‡å¯ä½œä¸šé¡ºåºå¦‚ä¸‹ï¼š `/sbin/init`è¿›ç¨‹æ”¶åˆ°å…³æœº/é‡å¯ä¿¡å· -> æŒ¨ä¸ªè°ƒèµ·å¯¹åº”è¿è¡Œæ¨¡å¼ä¸‹çš„`rc.d`ä¸­æ³¨å†Œçš„æœåŠ¡çš„å¯¹åº”å‡½æ•°ï¼ˆå…³æœºæ¨¡å¼ä¹Ÿå¯ä»¥æ³¨å†ŒSä¿¡æ¯ï¼Œåªè¦ä¸šåŠ¡éœ€æ±‚ï¼‰ -> æœ€ç»ˆå…³é—­å†…æ ¸

## systemd - æ›´äººæ€§åŒ–çš„æœåŠ¡è¿›ç¨‹ç®¡ç†å·¥å…·
* systemdä¸»è¦æ”¹è¿›æ˜¯åœ¨äººæœºäº¤äº’ä¸æ³¨å†Œæ–¹å¼ä¸Šï¼Œåº•å±‚çš„ä½œç”¨åŸç†ä¸Šæ²¡æœ‰å¤ªå¤šå˜åŒ–ã€‚æˆ‘æ›´å€¾å‘äºæŠŠä»–ç†è§£ä¸º`init.d`è„šæœ¬çš„ä¸€ä¸ªwrapperç¨‹åº,å½“ä½¿ç”¨systemdæ—¶æ³¨å†Œä¸è°ƒç”¨æ–¹å¼å¦‚ä¸‹ï¼š

	1. systemdé…ç½®æ–‡ä»¶åœ°å€ï¼Œç±»ä¼¼init.dçš„/etc/init.d/ç›®å½•ï¼š

			/lib/systemd/system/
    2. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å‰ï¼Œéœ€ç¡®ä¿ `/etc/init.d/` æˆ– `/lib/systemd/system/` ä¸‹æœ‰å¯¹åº”æœåŠ¡çš„ç®¡ç†è„šæœ¬ã€‚
    ç›¸å…³è„šæœ¬ä¸€èˆ¬éƒ½å¯googleåˆ°ï¼Œæ¯”å¦‚ï¼šhttps://github.com/zokeber/supervisor-systemd/blob/master/etc/systemd/system/supervisord.service
    ä¹Ÿå¯ä»¥è‡ªå·±å‚è€ƒç€ç°æœ‰è„šæœ¬å†™
	2. å¼€æœºè‡ªå¯åŠ¨ï¼Œä¹Ÿä¼šå¯¹åº”çš„å†™åˆ°rc.dä¸­ï¼š

			systemctl enable nginx
	3. æŸ¥çœ‹æ‰€æœ‰çš„å¼€æœºè‡ªå¯åŠ¨ï¼š

			systemctl list-unit-files | grep enabled
	4. ç§»é™¤å¼€æœºè‡ªå¯åŠ¨ï¼Œ ä¹Ÿä¼šå¯¹åº”çš„å†™åˆ°rc.dä¸­ï¼š

			systemctl disable nginx
	5. ç®¡ç†æœåŠ¡ï¼š

			systemctl reload nginx
			systemctl restart nginx
			systemctl stop nginx
		
* æˆ‘ä»¬å‘ç°ä½¿ç”¨systemdåï¼Œ æ— éœ€å†å…³æ³¨åº•å±‚çš„`init.d` ä¸ `rc.d`çš„å·¥ä½œåŸç†ä¸ç›¸äº’å…³ç³»ã€‚è¯¥ç¨‹åºå°è£…äº†åº•å±‚æŠ€æœ¯ç»†èŠ‚ï¼Œä½¿å¾—äº¤äº’æ›´äººæ€§åŒ–ã€‚


## å‚è€ƒèµ„æ–™
* [Systemd å…¥é—¨æ•™ç¨‹ï¼šå‘½ä»¤ç¯‡ - é˜®ä¸€å³°](http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html)
* [Systemd å…¥é—¨æ•™ç¨‹ï¼šå®æˆ˜ç¯‡ - é˜®ä¸€å³°](http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html)
* [ç»´åŸºç™¾ç§‘ï¼šLinux Runlevel](https://en.wikipedia.org/wiki/Runlevel)

